#+TITLE:  "GNU Screen Tips"
#+AUTHOR: wanglifeng
#+OPTIONS: H:4 ^:nil
#+LATEX_CLASS: latex-doc
#+PAGE_TAGS: screen
#+PAGE_CATETORIES: tools
#+PAGE_LAYOUT: post

#+HTML: <!--abstract-begin-->
Gnu screen是一款实现终端复用的软件，本文纪录常用的操作以备忘。
#+HTML: <!--abstract-end-->

* 打开screen会话

所有screen操作均需先按组合键CTRL + A

** 打开screen会话，并挂起

#+BEGIN_SRC sh
screen 
CTRL + A
then d
#+END_SRC

=可以通过screen ls命令查看screen会话=

#+BEGIN_EXAMPLE
[auditor@websrv ~]$ screen -ls
There is a screen on:
        18864.main      (Attached)
#+END_EXAMPLE

** 以screen运行一个命令

#+BEGIN_SRC sh
screen ftp ftp://ftpsrv/file
#+END_SRC

** 新建一个命名会话
#+BEGIN_EXAMPLE
screen -S ss
CTRL + A, then d
#+END_EXAMPLE

重新连接会话:
#+BEGIN_SRC sh
screen -r ss
#+END_SRC

* screen会话共享
** 第一个用户会话
#+BEGIN_EXAMPLE
screen -S ss
#+END_EXAMPLE

** 第二个用户会话
#+BEGIN_EXAMPLE
screen -x ss
#+END_EXAMPLE

** 登录shell每次连接至同一screen session
=在.bash_profile下添加如下内容=

#+BEGIN_SRC sh
### Launch Screen automatically ###  
echo   
echo "Starting screen in 3 seconds, press Q to cancel.";
for i in 3 2 1 ; do
  read -n 1 -t 1 -s a && break
done
set a = $a | tr '[A-Z]' '[a-z]'
if [ "$a" != "q" ]; then
  screen -D -R main
  logout
  exit;
fi
echo "Canceled"  
### End of Launch Screen
#+END_SRC

* 登录即挂起
#+BEGIN_SRC sh
screen -dmS mygdb gdb execlp_test
#+END_SRC

一般用于调试

* 参考资料
1. [[http://www.gnu.org/software/screen/manual/screen.html "GNU Screen User Manual"][GNU Screen User Manual]]
2. [[http://www.ibm.com/developerworks/cn/linux/l-cn-screen/][linux 技巧：使用 screen 管理你的会话]]

=目前本人已经用tmux代替screen, 相对来说tmux更易于使用，扩展性更强，开发社区也更活跃。=
